<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<title>Fasten Your Seatbelts</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<!--[if lt IE 9]>
		<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
	<![endif]-->

<!-- Google Fonts -->
<link
	href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700|Lato:400,100,300,700,900'
	rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="css/style.css">
<!-- <link rel="stylesheet"
	href="webjars/dojo/1.10.4/dijit/themes/claro/claro.css" /> -->
<script>dojoConfig = {parseOnLoad: true}</script>
<script src="webjars/dojo/1.10.4/dojo/dojo.js" data-dojo-config="async: true"></script>
</head>

<body class="size-1140 cdc-background-img">
	<!-- TOP NAV WITH LOGO -->
	<div class="container">
		<div class="top">
			<h1 id="title" class="hidden">
				<span id="logo"> <span>Fasten your</span> seatbelts
				</span>
			</h1>
		</div>
		<div data-dojo-type="dijit/form/Form" id="login_form"
			data-dojo-id="login_form" class="login-box animated fadeInUp">
			<div class="box-header">
				<h2>Internet</h2>
			</div>
			<label for="username">Gebruikersnaam</label> <br /> <input
				type="text" id="username" name="userName"> <br /> <label
				for="password">Wachtwoord</label><br /> <input type="password"
				id="password" name="passWord"> <br /> <label for="mbs">Aantal MB' s
				</label> <br /> <input type="number" id="mbs" name="mbs"><br />
				<div id="login_error">Uw login gegevens zijn incorrect.</div>
			<button id="submit_button" type="submit">Koop internet</button>
		</div>
	</div>
</body>
<script>

			require(["dojo/dom", "dojo/request", "dojo/json", "dojo/dom-form", "dojo/on"], function(dom, request, JSON, domForm, on) {
				on(dom.byId("submit_button"), "click", function(){
					console.log("Dojo Post");
					var userName = dom.byId("username");
					var passWord = dom.byId("password");
					var error = dom.byId("login_error");
	            	var url = "loginservlet";
	            	request.post(url, {
	                	data: "{ userName: "+userName.value+", passWord: "+passWord.value+" }",
		                handleAs: "json",
	                    headers:{
	                        "Content-Type": "application/json"
	                    },
		                timeout: 2000
	            	}).then(function(response) {
		            	console.log(response)
		            	if(response != "" && response.isLoggedIn){
	                		window.location = "http://nu.nl";
		            	} else {	
		            		document.getElementById('login_error').style.display = "block";   		
			            	}
	            	}, function(error) {
		            	console.log(error);
	            	});
				});
	        });

</script>
</html>
